# ============================================
# SOLAR VALLEY WEBAPP - BASE CONFIGURATION
# ============================================
# This file contains common settings for all environments
# Environment-specific settings are in application-{profile}.properties

# ============================================
# APPLICATION INFO
# ============================================
spring.application.name=Solar Valley Webapp
server.port=8080
server.servlet.context-path=

# ============================================
# ACTIVE PROFILE
# ============================================
# Default profile: dev
# Override with: java -jar app.jar --spring.profiles.active=prod
spring.profiles.active=dev

# ============================================
# THYMELEAF CONFIGURATION
# ============================================
spring.thymeleaf.prefix=classpath:/templates/
spring.thymeleaf.suffix=.html
spring.thymeleaf.mode=HTML
spring.thymeleaf.encoding=UTF-8
spring.thymeleaf.cache=false
spring.thymeleaf.check-template=true
spring.thymeleaf.check-template-location=true

# ============================================
# STATIC RESOURCES
# ============================================
spring.web.resources.static-locations=classpath:/static/
spring.web.resources.cache.period=3600
spring.web.resources.chain.strategy.content.enabled=true
spring.web.resources.chain.strategy.content.paths=/**

# ============================================
# FILE UPLOAD CONFIGURATION
# ============================================
spring.servlet.multipart.enabled=true
spring.servlet.multipart.max-file-size=50MB
spring.servlet.multipart.max-request-size=50MB
spring.servlet.multipart.file-size-threshold=2KB

# ============================================
# JACKSON (JSON) CONFIGURATION
# ============================================
spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.time-zone=Asia/Kolkata
spring.jackson.default-property-inclusion=non_null

# ============================================
# LOGGING CONFIGURATION
# ============================================
logging.level.root=INFO
logging.level.com.solarvalley.webapp=DEBUG
logging.level.org.springframework.web=INFO
logging.level.org.springframework.security=DEBUG
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE

# Log file configuration
logging.file.name=logs/solarvalley.log
logging.file.max-size=10MB
logging.file.max-history=30
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %msg%n
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n

# ============================================
# ERROR HANDLING
# ============================================
server.error.include-message=always
server.error.include-binding-errors=always
server.error.include-stacktrace=on_param
server.error.include-exception=false

# ============================================
# SESSION CONFIGURATION
# ============================================
server.servlet.session.timeout=30m
server.servlet.session.cookie.http-only=true
server.servlet.session.cookie.secure=false
server.servlet.session.cookie.same-site=lax

# ============================================
# INTERNATIONALIZATION
# ============================================
spring.messages.basename=messages
spring.messages.encoding=UTF-8
spring.messages.cache-duration=-1

# ============================================
# ACTUATOR ENDPOINTS (DISABLED FOR NOW)
# ============================================
# Will be enabled in production setup
management.endpoints.enabled-by-default=false
management.endpoint.health.enabled=true
management.endpoint.info.enabled=true
management.endpoints.web.exposure.include=health,info
management.endpoint.health.show-details=when-authorized

# ============================================
# FLYWAY MIGRATION CONFIGURATION
# ============================================
spring.flyway.enabled=true
spring.flyway.baseline-on-migrate=true
spring.flyway.locations=classpath:db/migration
spring.flyway.encoding=UTF-8
spring.flyway.validate-on-migrate=true
spring.flyway.out-of-order=false
spring.flyway.placeholder-replacement=false

